{% load static %}
{% load socialaccount %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardian Path</title>
    <link rel="stylesheet" type="text/css" href="{% static "css/style.css" %}">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
    <header>
        <!-- 메시지 출력 -->
        {% if messages %}
        <div class="messages">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
        {% endif %}
    </header>
    <div class="container">
        <div class="header">
            {% if user.is_authenticated %}
                <!-- 로그인된 상태일 때 프로필 아이콘과 패널 표시-->
                <div class="profile-icon-btn">
                    <img src="{% static 'img/profile-icon.png' %}" alt="프로필 아이콘" onclick="toggleProfilePanel()">
                    <div class="profile-panel" id="profile-panel">
                        <p>안녕하세요, {{ user.username }}님!</p>
                        <a href="{% url 'profile' %}">내 정보</a>
                        <a href="{% url 'logout' %}">로그아웃</a>
                        <a href="{% url 'password_change' %}">비밀번호 변경</a>
                    </div>
                </div>
            {% else %}
                <!-- 로그인되지 않은 상태일 때 로그인 버튼을 표시 -->
                 <div class="profile-icon-btn">
                    <img src="{% static "img/profile-icon.png" %}" alt="프로필 아이콘" onclick="toggleProfilePanel()">
                    <div class="profile-panel" id="profile-panel">
                        <a href="{% url 'login_view' %}">로그인</a>
                    </div>
                    <button type="button" onclick="location.href = '{% provider_login_url 'kakao' %}'">
                        <img class = "kakao" src="https://k.kakaocdn.net/14/dn/btroDszwNrM/I6efHub1SN5KCJqLm1Ovx1/o.jpg" alt="" >
                    </button>
                 </div>
            {% endif %}
        </div>
        <div class="title">
            <h1>Guardian Path</h1>
        </div>
        <div class="user-types">
            <label class="user-type-label">
                <input type="radio" name="user-type" class="user-type-radio" value="general">
                <span class="user-type-btn"><img src="{% static "img/user-icon.png" %}" alt="일반 사용자 아이콘"> 일반 사용자</span>
            </label>
            <label class="user-type-label">
                <input type="radio" name="user-type" class="user-type-radio" value="elevator">
                <span class="user-type-btn"><img src="{% static "img/elevator-icon.png" %}" alt="엘리베이터 아이콘"> 엘리베이터 사용자</span>
            </label>
            <label class="user-type-label">
                <input type="radio" name="user-type" class="user-type-radio" value="escalator">
                <span class="user-type-btn"><img src="{% static "img/escalator-icon.png" %}" alt="에스컬레이터 아이콘"> 에스컬레이터 사용자</span>
            </label>
        </div>
        <div class="search-box">
            <div class="input-group">
                <label for="departure">출발지</label>
                <div class ="input-with-icon">
                    <img src="{% static "img/gps-icon.png" %}" alt="GPS 아이콘">
                    <input type="text" id="departure" placeholder="출발지 입력">
                    <button type="button" onclick="openAddressSearch('departure')">주소 검색</button>
                </div>
            </div>
            <div class="input-group">
                <label for="destination">도착지</label>
                <div class ="input-with-icon">
                    <img src="{% static "img/gps-icon.png" %}" alt="GPS 아이콘">
                    <input type="text" id="destination" placeholder="도착지 입력">
                    <button type="button" onclick="openAddressSearch('destination')">주소 검색</button>
                </div>
            </div>
            <button class="search-btn">검색</button>
        </div>
    </div>
    <script src="{% static "js/home.js" %}"></script>
</body>
</html>